<html>
<head>
</head>
<body>


<table>
  <% for(var i=0; i < data.length; i++) { %>
     <tr>
       <td><%= data[i].id %></td>
       <td><%= data[i].name %></td>
       <td><button class = 'join' id='<%= data[i].name%>' user='<%= user%>'/></td>
        <!-- <td><a href="http://localhost:3000/chat?room=" + <%= data[i].name %> + "&amp;sender=" + <td><%= user %></td>  class="btn btn-default">join</a></td> -->
     </tr>
  <% } %>
</table>


    <input class='newroom'/>
    <button id='create'>
    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script>
        alert(1);
        var socket = io();
        $('#create').click (function (){
          alert("in a least");
          var roomname = $('.newroom').val();
          if(roomname != ''){
            var  roomnumber = parseInt(Math.random() * 10000);
            socket.emit('newroom', {name: roomname, id: roomnumber});
          }
        });
        // alert($('.join')[0].attr('user'));
        $(".join").click(function()
        {
          // socket.emit('join', $(this).id );
            // alert($(this).id);
            var str ="http://localhost:3000/chat?room=" + this.id + "&sender=" +  this.getAttribute("user");
            window.location = str;
        });
    </script>
</body>
</html>
